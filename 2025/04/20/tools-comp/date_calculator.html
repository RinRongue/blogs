<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>æ—¥æœŸè®¡ç®—å™¨</title>
    <style>
        body {
            font-family: sans-serif;
            padding: 30px;
            max-width: 400px;
            margin: auto;
            background-color: #f0f0f0;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .input-group {
            margin: 10px 0;
        }
        label {
            display: block;
            margin-bottom: 4px;
        }
        input, select {
            width: 100%;
            padding: 8px;
            font-size: 16px;
        }
        #result {
            margin-top: 20px;
            padding: 12px;
            background-color: #fff;
            border-radius: 5px;
            font-size: 18px;
            color: green;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>ğŸ“… æ—¥æœŸè®¡ç®—å™¨</h1>
    <div class="input-group">
        <label for="startDate">èµ·å§‹æ—¥æœŸï¼ˆå¦‚ 2024.01.01ï¼‰</label>
        <input type="text" id="startDate" placeholder="è¯·è¾“å…¥æ—¥æœŸï¼ˆYYYY.MM.DDï¼‰">
    </div>

    <div class="input-group">
        <label for="operation">æ“ä½œï¼ˆåŠ  / å‡ï¼‰</label>
        <select id="operation">
            <option value="+">+</option>
            <option value="-">-</option>
        </select>
    </div>

    <div class="input-group">
        <label for="days">å¤©æ•°</label>
        <input type="number" id="days" placeholder="è¯·è¾“å…¥å¤©æ•°">
    </div>

    <div id="result">è¯·è¾“å…¥å®Œæ•´ä¿¡æ¯ä»¥è®¡ç®—</div>

    <script>
        function parseDate(str) {
            const parts = str.trim().split('.');
            if (parts.length !== 3) return null;
            const [y, m, d] = parts.map(Number);
            if (isNaN(y) || isNaN(m) || isNaN(d)) return null;
            return new Date(y, m - 1, d);
        }

        function formatDate(date) {
            const y = date.getFullYear();
            const m = String(date.getMonth() + 1).padStart(2, '0');
            const d = String(date.getDate()).padStart(2, '0');
            return `${y}.${m}.${d}`;
        }

        function calculate() {
            const start = parseDate(document.getElementById('startDate').value);
            const op = document.getElementById('operation').value;
            const days = parseInt(document.getElementById('days').value);

            const resultDiv = document.getElementById('result');

            if (!start || isNaN(days)) {
                resultDiv.textContent = 'è¯·è¾“å…¥æ­£ç¡®çš„æ—¥æœŸå’Œå¤©æ•°';
                resultDiv.style.color = 'red';
                return;
            }

            let newDate = new Date(start);

            if (op === '+') {
                newDate.setDate(newDate.getDate() + days);
            } else {
                newDate.setDate(newDate.getDate() - days);
            }

            resultDiv.textContent = `è®¡ç®—ç»“æœï¼š${formatDate(newDate)}ï¼ˆæ˜ŸæœŸ${"æ—¥ä¸€äºŒä¸‰å››äº”å…­"[newDate.getDay()]}ï¼‰`;
            resultDiv.style.color = 'green';
        }

        // è‡ªåŠ¨åœ¨è¾“å…¥åè®¡ç®—
        document.getElementById('startDate').addEventListener('input', calculate);
        document.getElementById('days').addEventListener('input', calculate);
        document.getElementById('operation').addEventListener('change', calculate);
    </script>
</body>
</html>
